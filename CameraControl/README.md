# CameraControl
> Теги: базовые, функциональные, камера

Компонент для вывода на экран трехмерных сцен и управления камерой. Камера может изменять наклон и направление взгляда относительно заданной позиции. Можно задать пресеты настроек камеры, которые состоят из координат рассматриваемой точки, дистанции до камеры, углов направления взгляда на эту точку. Пресеты могут быть применены анимированно. В пресетах может содержаться не вся информация, а только та, что необходима для применения и перезаписи.

При горизонтальном перемещении пальца по экрану камера вращается вокруг вертикальной оси. При вертикальном движении по экрану камера меняет свой наклон. При вращении колесика мышки или сведении-разведении двух пальцев на поверхности экрана, камера приближается или удаляется от наблюдаемой точки. При клике в задний план отправляется событие **Event**.

## Основное использование:

CameraControl отвечает за демонстрацию других компонентов и не имеет собственного визуального отображения:

![CameraControl](screenshots/no_image.png)

Код примера использования CameraControl: 

```xml
{% include_relative presentations/presentation.xml %}
```

## Свойства компонента:

| **Свойство**                  | **Тип**                     | **Описание**                             |
| ----------------------------- | --------------------------- | ---------------------------------------- |
| **Event**                     | **Event**                   | Событие клика в задний план камеры. (Список)|
| **BackgroundColor**           | **ColorARGB**               | Цвет фона камеры. (Список)               |
| **CameraOrientationPresets**  | **CameraOrientationPreset** | Список пресетов для настройки камеры. (Список)|
| **OrthographicCameraSize**    | float                       | Высота ортографической камеры.           |
| **Projection**                | **DisplayMode**             | Выбор между ортографической и перспективной камерой.|
| **FrustumBottom**             | float                       | Настройка нижней границы для ручного создания пирамиды видимости перспективной камеры.|
| **FrustumRight**              | float                       | Настройка правой границы для ручного создания пирамиды видимости перспективной камеры.|
| **FrustumTop**                | float                       | Настройка верхней границы для ручного создания пирамиды видимости перспективной камеры.|
| **FrustumLeft**               | float                       | Настройка левой границы для ручного создания пирамиды видимости перспективной камеры.|
| **StopMotionWhenPointerDown** | boolean                     | Нужно ли остановить движение камеры, если поинтер опустился.|
| **UseCustomFrustum**          | boolean                     | Будет ли использоваться ручное создание пирамиды видимости.|
| **ClearDepthOnly**            | boolean                     | Оставлять ли задний план камеры прозрачным или, в противном случае, он будет залит цветом BackgroundColor.|
| **CullingMask**               | string                      | Опциональное свойство. Название слоя, который видит камера.|
| **Blur**                      | boolean                     | Включение эффекта размытия.              |
| **ZOrder**                    | float                       | Параметр для настройки сортировки нескольких камер. Изображения камер выводятся на экран в порядке от меньшего к большему значению параметра.|
| **TransparencySortMode**      | **DisplayMode**             | Способ сортировки прозрачных объектов для их отрисовки на экране.|
| **Fov**                       | float                       | Вертикальный угол раствора перспективной камеры.|
| **DisableCameraAnimation**    | boolean                     | Будет ли камера переключаться между пресетами мгновенно, без анимации.|
| **TargetOffsetZ**             | float                       | Смещение рассматриваемой точки по оси Z. |
| **TargetOffsetY**             | float                       | Смещение рассматриваемой точки по оси Y. |
| **TargetOffsetX**             | float                       | Смещение рассматриваемой точки по оси X. |
| **TargetOffsetXMin**          | float                       | Минимальное смещение рассматриваемой точки по оси X.|
| **TargetOffsetYMin**          | float                       | Минимальное смещение рассматриваемой точки по оси Y.|
| **TargetOffsetZMin**          | float                       | Минимальное смещение рассматриваемой точки по оси Z.|
| **TargetOffsetXMax**          | float                       | Максимальное смещение рассматриваемой точки по оси X.|
| **TargetOffsetYMax**          | float                       | Максимальное смещение рассматриваемой точки по оси Y.|
| **TargetOffsetZMax**          | float                       | Максимальное смещение рассматриваемой точки по оси Z.|
| **YDeg**                      | float                       | Угол наклона камеры.                     |
| **XDeg**                      | float                       | Угол поворота камеры вокруг вертикальной оси.|
| **ZoomDampening**             | float                       | Настройка инерционности камеры. Чем меньше значение, тем у камеры больше инерции.|
| **ZoomRate**                  | int                         | Насколько быстро будет двигаться камера при вращении колесика мышки.|
| **XMaxLimit**                 | float                       | Максимальный угол поворота вокруг вертикальной оси.|
| **XMinLimit**                 | float                       | Минимальный угол поворота вокруг вертикальной оси.|
| **YMaxLimit**                 | float                       | Максимальный угол наклона камеры.        |
| **YMinLimit**                 | float                       | Минимальный угол наклона камеры.         |
| **NoXLimit**                  | boolean                     | Отключение ограничения вращения вокруг вертикальной оси.|
| **YSpeed**                    | float                       | Скорость изменения наклона камеры.       |
| **XSpeed**                    | float                       | Скорость вращения вокруг вертикальной оси.|
| **MinDistance**               | float                       | Минимальное расстояние от камеры до наблюдаемой точки.|
| **MaxDistance**               | float                       | Максимальное расстояние от камеры до наблюдаемой точки.|
| **Distance**                  | float                       | Расстояние от камеры до наблюдаемой точки.|
| **UseCustomFarClipPlane**     | boolean                     | Будут ли использоваться настройки дальней плоскости обрезания.|
| **FarClipPlane**              | float                       | Расстояние от камеры до дальней плоскости.|
| **FlyingMode**                | **CameraFlyingMode**        | Режим полёта камеры.                     |
| **ZoomToPoint**               | boolean                     | Признак приближения камеры в сторону курсора (не применимо к режиму FlyAroundPoint).|

#### Свойства CameraOrientationPreset:

| **Свойство**                  | **Тип**                     | **Описание**                             |
| ----------------------------- | --------------------------- | ---------------------------------------- |
| **MinDistance**               | float                       | Минимальное расстояние от камеры до наблюдаемой точки.|
| **MaxDistance**               | float                       | Максимальное расстояние от камеры до наблюдаемой точки.|
| **Distance**                  | float                       | Расстояние от камеры до наблюдаемой точки.|
| **XDeg**                      | float                       | Угол поворота камеры вокруг вертикальной оси.|
| **YDeg**                      | float                       | Угол наклона камеры.                     |
| **XMaxLimit**                 | int                         | Максимальный угол поворота вокруг вертикальной оси.|
| **XMinLimit**                 | int                         | Минимальный угол поворота вокруг вертикальной оси.|
| **YMaxLimit**                 | int                         | Максимальный угол наклона камеры.        |
| **YMinLimit**                 | int                         | Минимальный угол наклона камеры.         |
| **TargetOffsetX**             | float                       | Смещение рассматриваемой точки по оси X. |
| **TargetOffsetY**             | float                       | Смещение рассматриваемой точки по оси Y. |
| **TargetOffsetZ**             | float                       | Смещение рассматриваемой точки по оси Z. |
| **TargetOffsetXMin**          | float                       | Минимальное смещение рассматриваемой точки по оси X.|
| **TargetOffsetYMin**          | float                       | Минимальное смещение рассматриваемой точки по оси Y.|
| **TargetOffsetZMin**          | float                       | Минимальное смещение рассматриваемой точки по оси Z.|
| **TargetOffsetXMax**          | float                       | Максимальное смещение рассматриваемой точки по оси X.|
| **TargetOffsetYMax**          | float                       | Максимальное смещение рассматриваемой точки по оси Y.|
| **TargetOffsetZMax**          | float                       | Максимальное смещение рассматриваемой точки по оси Z.|
| **FlyingMode**                | **CameraFlyingMode**        | Режим полёта камеры.                     |
| **ZoomToPoint**               | boolean                     | Признак приближения камеры в сторону курсора (не применимо к режиму FlyAroundPoint).|
| **PresetID**                  | string                      | Идентификатор пресета.                   |

## События:

| **Название события** | **Условия возникновения**               | **Параметры** |
| -------------------- | --------------------------------------- | ------------- |
| **Event**            | Клик пользователя в задний план камеры. | -             |

## Команды:

| **Команда**     | **Параметры**                      | **Реакция компонента на команды**        |
| --------------- | ---------------------------------- | ---------------------------------------- |
| **set**         | Blur (boolean)                     | Включает или выключает эффект размытия в зависимости от значения. |
| **applypreset** | PresetID (string), Force (boolean) | Применяет настройки камеры, указанные в пресете с идентификатором, переданным в параметре **PresetID**. Если указанный пресет совпадает с текущим пресетом, то указанные в пресете параметры применются при **Force** = true. Если **Force** = false, повторное применение параметров из пресета не произойдет. |

## Схема компонента:

```xml
{% include_relative scheme.xsd %}
```

## Рекомендуемые ссылки:

* [Варианты использования CameraControl](presentations.md)
* [Особенности и приемы работы с CameraControl](hints.md)


